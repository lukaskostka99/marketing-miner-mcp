name: "marketing-miner-mcp"
description: "MCP server pro Marketing Miner (API klíč zadávaný uživatelem)."
version: "0.6.1"

runtime: "container"
build:
  dockerfile: "Dockerfile"
  dockerBuildPath: .

startCommand:
  type: http
  path: /mcp
  healthCheck:
    path: /mcp/health

  configSchema:
    type: object
    required: ["apiToken"]
    properties:
      apiToken:
        type: string
        title: "Marketing Miner API Token"
        description: "Váš osobní API token z Marketing Mineru."
        format: password
      httpPath:
        type: string
        title: "HTTP Path"
        default: "/mcp"

  exampleConfig:
    apiToken: ""
    httpPath: "/mcp"

  commandFunction: |-
    (config) => ({
      command: "python",
      args: ["server.py"],
      env: {
        "MARKETING_MINER_API_TOKEN": config.apiToken || "",
        "MCP_HTTP_PATH": config.httpPath || "/mcp",
        "HOST": "0.0.0.0",
        "PORT": process.env.PORT,
        "PYTHONUNBUFFERED": "1"
      }
    })
