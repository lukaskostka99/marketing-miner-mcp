name: "marketing-miner-mcp"
description: "MCP server for Marketing Miner (per-user API key via Connect)."
version: "0.6.2"

startCommand:
  type: stdio

  configSchema:
    type: object
    required: ["apiToken"]
    properties:
      apiToken:
        type: string
        title: "Marketing Miner API Token"
        description: "Vložte svůj osobní API token z Marketing Mineru."
        format: password

  exampleConfig:
    apiToken: ""

  commandFunction: |-
    (config) => ({
      command: "python",
      // --stdio je jen přepínač pro náš server, ať ho vynutíme
      args: ["server.py", "--stdio", "--api-token", config.apiToken || ""],
      env: {
        // 1) Přímé mapování do ENV (standardní vzor u Smithery)
        "MARKETING_MINER_API_TOKEN": config.apiToken || "",
        "PYTHONUNBUFFERED": "1"
      }
    }))
