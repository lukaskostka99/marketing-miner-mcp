name: "marketing-miner-mcp"
description: "MCP server pro Marketing Miner - analýza klíčových slov a hledanost. Každý uživatel připojí svůj vlastní API token přes Connect formulář."
version: "0.7.1"
author: "Marketing Miner Integration"
tags: ["seo", "keywords", "marketing", "analytics", "czech"]

runtime: "container"

build:
  dockerfile: "./Dockerfile"
  dockerBuildPath: "."

startCommand:
  type: "http"
  path: "/mcp"
  healthCheck:
    path: "/mcp"   # FastMCP typicky odpoví 200 na /mcp

  commandFunction: |-
    (config) => ({
      command: "python",
      args: ["server.py", "--api-token", (config?.MARKETING_MINER_API_TOKEN ?? "")],
      env: {
        MARKETING_MINER_API_TOKEN: (config?.MARKETING_MINER_API_TOKEN ?? ""),
        MCP_HTTP_PATH: "/mcp",
        HOST: "0.0.0.0",
        PORT: process.env.PORT,
        PYTHONUNBUFFERED: "1"
      }
    }))

configSchema:
  type: "object"
  title: "Marketing Miner Konfigurace"
  description: "Konfigurace připojení k Marketing Miner API"
  required: ["MARKETING_MINER_API_TOKEN"]
  properties:
    MARKETING_MINER_API_TOKEN:
      type: "string"
      title: "API Token"
      description: "Váš osobní API token z Marketing Mineru. Získejte ho na https://www.marketingminer.com/cs/features/api"
      format: "password"
      minLength: 10
      pattern: "^[A-Za-z0-9_-]+$"
  additionalProperties: false

exampleConfig:
  MARKETING_MINER_API_TOKEN: "your-api-token-here"
