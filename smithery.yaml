name: "marketing-miner-mcp"
description: "MCP server for Marketing Miner (per-user API key via Connect form)."
version: "0.6.1"

deployment:
  kind: container
  docker:
    context: .
    dockerfile: ./Dockerfile

startCommand:
  type: http
  path: /mcp
  healthCheck:
    path: /mcp/health

  # Tato sekce generuje formulář pro připojení v rozhraní Smithery.
  configSchema:
    type: object
    required: ["apiToken"]
    properties:
      apiToken:
        type: string
        title: "Marketing Miner API Token"
        description: "Your personal API token from Marketing Miner."
        format: password
      httpPath:
        type: string
        title: "HTTP Path"
        default: "/mcp"

  # Příklad pro interní nástroje platformy Smithery.
  exampleConfig:
    apiToken: ""
    httpPath: "/mcp"

  # --- DŮLEŽITÁ ZMĚNA ---
  # Toto je jediný a správný způsob, jak předat hodnoty z formuláře
  # ('apiToken' a 'httpPath') jako proměnné prostředí do kontejneru.
  # Používá se jednoduchá šablona {{ název_pole_z_formuláře }}.
  env:
    MARKETING_MINER_API_TOKEN: "{{ apiToken }}"
    MCP_HTTP_PATH: "{{ httpPath }}"
